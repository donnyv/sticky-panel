(function (a) { a.fn.stickyPanel = function (c) { var c = a.extend({}, a.fn.stickyPanel.defaults, c); return this.each(function () { a(window).bind("scroll.stickyPanel", { selected: a(this), options: c }, b) }) }; function b(d) { var i = d.data.selected; var g = d.data.options; var l = navigator.userAgent.toLowerCase().indexOf("mobile") > 0; var c = a(window).height(); var e = i.outerHeight(true); var h = a(document).scrollTop(); if (!l && h <= a(document).height() - c && h > i.offset().top - g.topPadding) { var k = 0; if (g.topPadding != "undefined") { k = k + g.topPadding } var p = i.offset().left; i.data("PanelsTop", i.offset().top - k); if (g.savePanelSpace == true) { var n = i.outerWidth(true); var f = i.css("float"); var m = i.css("display"); var j = Math.ceil(Math.random() * 9999); i.data("PanelSpaceID", "stickyPanelSpace" + j); i.before("<div id='" + i.data("PanelSpaceID") + "' style='width:" + n + "px;height:" + e + "px;float:" + f + ";display:" + m + ";'>&nbsp;</div>") } if (g.afterDetachCSSClass != "") { i.addClass(g.afterDetachCSSClass) } i.data("Original_Inline_CSS", (!i.attr("style") ? "" : i.attr("style"))); i.css({ margin: 0, left: p, top: k, position: "fixed" }) } if (h <= i.data("PanelsTop") && i.css("top") != "auto") { if (g.savePanelSpace == true) { a("#" + i.data("PanelSpaceID")).remove() } i.attr("style", i.data("Original_Inline_CSS")); if (g.afterDetachCSSClass != "") { i.removeClass(g.afterDetachCSSClass) } } } a.fn.stickyPanel.defaults = { topPadding: 0, afterDetachCSSClass: "", savePanelSpace: false} })(jQuery);